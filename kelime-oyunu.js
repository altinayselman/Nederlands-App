const wordCategories = {
    beginner: {
        name: 'Beginnersniveau',
        words: [
            { dutch: "hallo", meaning: "hello", icon: "fas fa-hand-wave", points: 5 },
            { dutch: "dag", meaning: "good day", icon: "fas fa-sun", points: 5 },
            { dutch: "doei", meaning: "goodbye", icon: "fas fa-hand", points: 5 },
            { dutch: "ja", meaning: "yes", icon: "fas fa-check-circle", points: 5 },
            { dutch: "nee", meaning: "no", icon: "fas fa-times-circle", points: 5 },
            { dutch: "dank je wel", meaning: "thank you", icon: "fas fa-heart", points: 5 },
            { dutch: "alsjeblieft", meaning: "please", icon: "fas fa-pray", points: 5 },
            { dutch: "goedemorgen", meaning: "good morning", icon: "fas fa-coffee", points: 5 },
            { dutch: "goedemiddag", meaning: "good afternoon", icon: "fas fa-sun", points: 5 },
            { dutch: "goedenavond", meaning: "good evening", icon: "fas fa-moon", points: 5 },
            { dutch: "water", meaning: "water", icon: "fas fa-tint", points: 5 },
            { dutch: "brood", meaning: "bread", icon: "fas fa-bread-slice", points: 5 },
            { dutch: "melk", meaning: "milk", icon: "fas fa-glass-milk", points: 5 },
            { dutch: "appel", meaning: "apple", icon: "fas fa-apple-alt", points: 5 },
            { dutch: "huis", meaning: "house", icon: "fas fa-home", points: 5 },
            { dutch: "auto", meaning: "car", icon: "fas fa-car", points: 5 },
            { dutch: "fiets", meaning: "bicycle", icon: "fas fa-bicycle", points: 5 },
            { dutch: "boek", meaning: "book", icon: "fas fa-book", points: 5 },
            { dutch: "pen", meaning: "pen", icon: "fas fa-pen", points: 5 },
            { dutch: "tafel", meaning: "table", icon: "fas fa-table", points: 5 },
            { dutch: "stoel", meaning: "chair", icon: "fas fa-chair", points: 5 },
            { dutch: "deur", meaning: "door", icon: "fas fa-door-closed", points: 5 },
            { dutch: "raam", meaning: "window", icon: "fas fa-window-maximize", points: 5 },
            { dutch: "bed", meaning: "bed", icon: "fas fa-bed", points: 5 },
            { dutch: "kat", meaning: "cat", icon: "fas fa-cat", points: 5 },
            { dutch: "hond", meaning: "dog", icon: "fas fa-dog", points: 5 },
            { dutch: "vogel", meaning: "bird", icon: "fas fa-dove", points: 5 },
            { dutch: "vis", meaning: "fish", icon: "fas fa-fish", points: 5 },
            { dutch: "boom", meaning: "tree", icon: "fas fa-tree", points: 5 },
            { dutch: "bloem", meaning: "flower", icon: "fas fa-flower", points: 5 },
            { dutch: "zon", meaning: "sun", icon: "fas fa-sun", points: 5 },
            { dutch: "maan", meaning: "moon", icon: "fas fa-moon", points: 5 },
            { dutch: "ster", meaning: "star", icon: "fas fa-star", points: 5 },
            { dutch: "wolk", meaning: "cloud", icon: "fas fa-cloud", points: 5 },
            { dutch: "regen", meaning: "rain", icon: "fas fa-cloud-rain", points: 5 },
            { dutch: "sneeuw", meaning: "snow", icon: "fas fa-snowflake", points: 5 },
            { dutch: "wind", meaning: "wind", icon: "fas fa-wind", points: 5 },
            { dutch: "berg", meaning: "mountain", icon: "fas fa-mountain", points: 5 },
            { dutch: "zee", meaning: "sea", icon: "fas fa-water", points: 5 },
            { dutch: "strand", meaning: "beach", icon: "fas fa-umbrella-beach", points: 5 },
            { dutch: "park", meaning: "park", icon: "fas fa-tree", points: 5 },
            { dutch: "straat", meaning: "street", icon: "fas fa-road", points: 5 },
            { dutch: "stad", meaning: "city", icon: "fas fa-city", points: 5 },
            { dutch: "land", meaning: "country", icon: "fas fa-flag", points: 5 },
            { dutch: "mens", meaning: "human", icon: "fas fa-user", points: 5 },
            { dutch: "kind", meaning: "child", icon: "fas fa-child", points: 5 },
            { dutch: "man", meaning: "man", icon: "fas fa-male", points: 5 },
            { dutch: "vrouw", meaning: "woman", icon: "fas fa-female", points: 5 },
            { dutch: "jongen", meaning: "boy", icon: "fas fa-child", points: 5 },
            { dutch: "meisje", meaning: "girl", icon: "fas fa-child", points: 5 },
            { dutch: "baby", meaning: "baby", icon: "fas fa-baby", points: 5 },
            { dutch: "familie", meaning: "family", icon: "fas fa-users", points: 5 },
            { dutch: "vriend", meaning: "friend", icon: "fas fa-user-friends", points: 5 },
            { dutch: "school", meaning: "school", icon: "fas fa-school", points: 5 },
            { dutch: "leraar", meaning: "teacher", icon: "fas fa-chalkboard-teacher", points: 5 },
            { dutch: "student", meaning: "student", icon: "fas fa-user-graduate", points: 5 },
            { dutch: "dokter", meaning: "doctor", icon: "fas fa-user-md", points: 5 },
            { dutch: "politie", meaning: "police", icon: "fas fa-user-shield", points: 5 },
            { dutch: "winkel", meaning: "shop", icon: "fas fa-store", points: 5 },
            { dutch: "restaurant", meaning: "restaurant", icon: "fas fa-utensils", points: 5 },
            { dutch: "ziekenhuis", meaning: "hospital", icon: "fas fa-hospital", points: 5 }
        ]
    },
    intermediate: {
        name: 'Middenniveau',
        words: [
            { dutch: "computer", meaning: "computer", icon: "fas fa-laptop", points: 10 },
            { dutch: "telefoon", meaning: "phone", icon: "fas fa-mobile-alt", points: 10 },
            { dutch: "boek", meaning: "book", icon: "fas fa-book", points: 10 },
            { dutch: "tafel", meaning: "table", icon: "fas fa-table", points: 10 },
            { dutch: "stoel", meaning: "chair", icon: "fas fa-chair", points: 10 },
            { dutch: "huis", meaning: "house", icon: "fas fa-home", points: 10 },
            { dutch: "school", meaning: "school", icon: "fas fa-school", points: 10 },
            { dutch: "werk", meaning: "work", icon: "fas fa-briefcase", points: 10 },
            { dutch: "eten", meaning: "food", icon: "fas fa-utensils", points: 10 },
            { dutch: "drinken", meaning: "drink", icon: "fas fa-glass-cheers", points: 10 },
            { dutch: "kantoor", meaning: "office", icon: "fas fa-building", points: 10 },
            { dutch: "vergadering", meaning: "meeting", icon: "fas fa-handshake", points: 10 },
            { dutch: "presentatie", meaning: "presentation", icon: "fas fa-presentation", points: 10 },
            { dutch: "collega", meaning: "colleague", icon: "fas fa-user-tie", points: 10 },
            { dutch: "project", meaning: "project", icon: "fas fa-project-diagram", points: 10 },
            { dutch: "deadline", meaning: "deadline", icon: "fas fa-clock", points: 10 },
            { dutch: "rapport", meaning: "report", icon: "fas fa-file-alt", points: 10 },
            { dutch: "salaris", meaning: "salary", icon: "fas fa-money-bill", points: 10 },
            { dutch: "vakantie", meaning: "vacation", icon: "fas fa-plane", points: 10 },
            { dutch: "reizen", meaning: "travel", icon: "fas fa-suitcase", points: 10 },
            { dutch: "hotel", meaning: "hotel", icon: "fas fa-hotel", points: 10 },
            { dutch: "restaurant", meaning: "restaurant", icon: "fas fa-utensils", points: 10 },
            { dutch: "menu", meaning: "menu", icon: "fas fa-list", points: 10 },
            { dutch: "rekening", meaning: "bill", icon: "fas fa-receipt", points: 10 },
            { dutch: "bestelling", meaning: "order", icon: "fas fa-shopping-cart", points: 10 },
            { dutch: "betaling", meaning: "payment", icon: "fas fa-credit-card", points: 10 },
            { dutch: "bank", meaning: "bank", icon: "fas fa-university", points: 10 },
            { dutch: "geld", meaning: "money", icon: "fas fa-money-bill-wave", points: 10 },
            { dutch: "sparen", meaning: "save", icon: "fas fa-piggy-bank", points: 10 },
            { dutch: "lenen", meaning: "borrow", icon: "fas fa-hand-holding-usd", points: 10 },
            { dutch: "verzekering", meaning: "insurance", icon: "fas fa-shield-alt", points: 10 },
            { dutch: "belasting", meaning: "tax", icon: "fas fa-file-invoice-dollar", points: 10 },
            { dutch: "inkomen", meaning: "income", icon: "fas fa-wallet", points: 10 },
            { dutch: "uitgaven", meaning: "expenses", icon: "fas fa-shopping-bag", points: 10 },
            { dutch: "begroting", meaning: "budget", icon: "fas fa-calculator", points: 10 },
            { dutch: "gezondheid", meaning: "health", icon: "fas fa-heartbeat", points: 10 },
            { dutch: "ziekte", meaning: "illness", icon: "fas fa-disease", points: 10 },
            { dutch: "medicijn", meaning: "medicine", icon: "fas fa-pills", points: 10 },
            { dutch: "apotheek", meaning: "pharmacy", icon: "fas fa-prescription-bottle", points: 10 },
            { dutch: "afspraak", meaning: "appointment", icon: "fas fa-calendar-check", points: 10 },
            { dutch: "wachtkamer", meaning: "waiting room", icon: "fas fa-chair", points: 10 },
            { dutch: "onderzoek", meaning: "examination", icon: "fas fa-stethoscope", points: 10 },
            { dutch: "behandeling", meaning: "treatment", icon: "fas fa-user-md", points: 10 },
            { dutch: "verwijzing", meaning: "referral", icon: "fas fa-file-medical", points: 10 },
            { dutch: "specialist", meaning: "specialist", icon: "fas fa-user-md", points: 10 },
            { dutch: "ziekenhuis", meaning: "hospital", icon: "fas fa-hospital", points: 10 },
            { dutch: "ambulance", meaning: "ambulance", icon: "fas fa-ambulance", points: 10 },
            { dutch: "spoedeisend", meaning: "emergency", icon: "fas fa-first-aid", points: 10 },
            { dutch: "verzorging", meaning: "care", icon: "fas fa-hand-holding-heart", points: 10 },
            { dutch: "revalidatie", meaning: "rehabilitation", icon: "fas fa-walking", points: 10 },
            { dutch: "therapie", meaning: "therapy", icon: "fas fa-comments", points: 10 },
            { dutch: "oefening", meaning: "exercise", icon: "fas fa-dumbbell", points: 10 },
            { dutch: "voeding", meaning: "nutrition", icon: "fas fa-apple-alt", points: 10 },
            { dutch: "dieet", meaning: "diet", icon: "fas fa-carrot", points: 10 },
            { dutch: "gewicht", meaning: "weight", icon: "fas fa-weight", points: 10 },
            { dutch: "beweging", meaning: "movement", icon: "fas fa-running", points: 10 },
            { dutch: "sport", meaning: "sport", icon: "fas fa-futbol", points: 10 },
            { dutch: "training", meaning: "training", icon: "fas fa-dumbbell", points: 10 },
            { dutch: "wedstrijd", meaning: "match", icon: "fas fa-trophy", points: 10 },
            { dutch: "competitie", meaning: "competition", icon: "fas fa-medal", points: 10 }
        ]
    },
    advanced: {
        name: 'Gevorderd niveau',
        words: [
            { dutch: "verantwoordelijkheid", meaning: "responsibility", icon: "fas fa-clipboard-check", points: 15 },
            { dutch: "gebeurtenis", meaning: "event", icon: "fas fa-calendar-event", points: 15 },
            { dutch: "ontwikkeling", meaning: "development", icon: "fas fa-chart-line", points: 15 },
            { dutch: "belangrijk", meaning: "important", icon: "fas fa-exclamation-circle", points: 15 },
            { dutch: "ervaring", meaning: "experience", icon: "fas fa-star", points: 15 },
            { dutch: "samenwerking", meaning: "collaboration", icon: "fas fa-users", points: 15 },
            { dutch: "mogelijkheid", meaning: "possibility", icon: "fas fa-lightbulb", points: 15 },
            { dutch: "onderzoek", meaning: "research", icon: "fas fa-microscope", points: 15 },
            { dutch: "maatschappij", meaning: "society", icon: "fas fa-globe-europe", points: 15 },
            { dutch: "wetenschap", meaning: "science", icon: "fas fa-atom", points: 15 },
            { dutch: "duurzaamheid", meaning: "sustainability", icon: "fas fa-leaf", points: 15 },
            { dutch: "klimaatverandering", meaning: "climate change", icon: "fas fa-temperature-high", points: 15 },
            { dutch: "milieubescherming", meaning: "environmental protection", icon: "fas fa-tree", points: 15 },
            { dutch: "energiebesparing", meaning: "energy saving", icon: "fas fa-solar-panel", points: 15 },
            { dutch: "afvalverwerking", meaning: "waste processing", icon: "fas fa-recycle", points: 15 },
            { dutch: "hernieuwbare energie", meaning: "renewable energy", icon: "fas fa-wind", points: 15 },
            { dutch: "biodiversiteit", meaning: "biodiversity", icon: "fas fa-seedling", points: 15 },
            { dutch: "ecosysteem", meaning: "ecosystem", icon: "fas fa-globe-americas", points: 15 },
            { dutch: "natuurbehoud", meaning: "nature conservation", icon: "fas fa-mountain", points: 15 },
            { dutch: "luchtkwaliteit", meaning: "air quality", icon: "fas fa-cloud", points: 15 },
            { dutch: "waterzuivering", meaning: "water treatment", icon: "fas fa-water", points: 15 },
            { dutch: "grondstofbeheer", meaning: "resource management", icon: "fas fa-box", points: 15 },
            { dutch: "innovatie", meaning: "innovation", icon: "fas fa-lightbulb", points: 15 },
            { dutch: "technologie", meaning: "technology", icon: "fas fa-microchip", points: 15 },
            { dutch: "digitalisering", meaning: "digitalization", icon: "fas fa-digital-tachograph", points: 15 },
            { dutch: "kunstmatige intelligentie", meaning: "artificial intelligence", icon: "fas fa-robot", points: 15 },
            { dutch: "automatisering", meaning: "automation", icon: "fas fa-cogs", points: 15 },
            { dutch: "cyberveiligheid", meaning: "cybersecurity", icon: "fas fa-shield-alt", points: 15 },
            { dutch: "gegevensbescherming", meaning: "data protection", icon: "fas fa-lock", points: 15 },
            { dutch: "privacybeleid", meaning: "privacy policy", icon: "fas fa-user-shield", points: 15 },
            { dutch: "netwerken", meaning: "networking", icon: "fas fa-network-wired", points: 15 },
            { dutch: "communicatiesysteem", meaning: "communication system", icon: "fas fa-satellite-dish", points: 15 },
            { dutch: "ondernemerschap", meaning: "entrepreneurship", icon: "fas fa-briefcase", points: 15 },
            { dutch: "bedrijfsstrategie", meaning: "business strategy", icon: "fas fa-chess", points: 15 },
            { dutch: "marktonderzoek", meaning: "market research", icon: "fas fa-search-dollar", points: 15 },
            { dutch: "concurrentieanalyse", meaning: "competition analysis", icon: "fas fa-chart-line", points: 15 },
            { dutch: "klanttevredenheid", meaning: "customer satisfaction", icon: "fas fa-smile", points: 15 },
            { dutch: "productinnovatie", meaning: "product innovation", icon: "fas fa-box-open", points: 15 },
            { dutch: "kwaliteitscontrole", meaning: "quality control", icon: "fas fa-check-double", points: 15 },
            { dutch: "procesoptimalisatie", meaning: "process optimization", icon: "fas fa-chart-bar", points: 15 },
            { dutch: "risicobeheer", meaning: "risk management", icon: "fas fa-shield-alt", points: 15 },
            { dutch: "besluitvorming", meaning: "decision making", icon: "fas fa-tasks", points: 15 },
            { dutch: "onderhandelingen", meaning: "negotiations", icon: "fas fa-handshake", points: 15 },
            { dutch: "conflictoplossing", meaning: "conflict resolution", icon: "fas fa-balance-scale", points: 15 },
            { dutch: "teambuilding", meaning: "team building", icon: "fas fa-users-cog", points: 15 },
            { dutch: "leiderschapsontwikkeling", meaning: "leadership development", icon: "fas fa-user-tie", points: 15 },
            { dutch: "personeelsbeleid", meaning: "personnel policy", icon: "fas fa-user-cog", points: 15 },
            { dutch: "werkgelegenheid", meaning: "employment", icon: "fas fa-briefcase", points: 15 },
            { dutch: "arbeidsvoorwaarden", meaning: "employment conditions", icon: "fas fa-file-contract", points: 15 },
            { dutch: "loopbaanontwikkeling", meaning: "career development", icon: "fas fa-road", points: 15 },
            { dutch: "prestatiebeoordeling", meaning: "performance evaluation", icon: "fas fa-star-half-alt", points: 15 },
            { dutch: "kennisoverdracht", meaning: "knowledge transfer", icon: "fas fa-brain", points: 15 },
            { dutch: "vaardigheidstraining", meaning: "skills training", icon: "fas fa-graduation-cap", points: 15 },
            { dutch: "certificering", meaning: "certification", icon: "fas fa-certificate", points: 15 },
            { dutch: "kwalificatie", meaning: "qualification", icon: "fas fa-award", points: 15 },
            { dutch: "beroepsopleiding", meaning: "vocational training", icon: "fas fa-user-graduate", points: 15 },
            { dutch: "specialisatie", meaning: "specialization", icon: "fas fa-microscope", points: 15 },
            { dutch: "onderwijsvernieuwing", meaning: "educational innovation", icon: "fas fa-chalkboard-teacher", points: 15 },
            { dutch: "studiebegeleiding", meaning: "study guidance", icon: "fas fa-user-friends", points: 15 },
            { dutch: "onderzoeksmethoden", meaning: "research methods", icon: "fas fa-flask", points: 15 },
            { dutch: "wetenschappelijk onderzoek", meaning: "scientific research", icon: "fas fa-atom", points: 15 }
        ]
    }
};

let currentCategory = 'beginner';
let currentWordIndex = 0;
let score = 0;
let words = [];
let streak = 0;
let learnedWords = new Set();

function initGame() {
    createCategorySelector();
    resetGame();
}

function createCategorySelector() {
    const container = document.getElementById('category-container');
    container.innerHTML = `
        <div class="form-group">
            <label for="category-select" class="form-label">Kies een niveau:</label>
            <select class="form-select" id="category-select" onchange="changeCategory(this.value)">
                ${Object.entries(wordCategories).map(([key, category]) => 
                    `<option value="${key}">${category.name}</option>`
                ).join('')}
            </select>
        </div>
    `;
}

function changeCategory(newCategory) {
    currentCategory = newCategory;
    resetGame();
}

function resetGame() {
    currentWordIndex = 0;
    score = 0;
    streak = 0;
    words = [...wordCategories[currentCategory].words];
    shuffleWords();
    updateUI();
    showNextWord();
}

function shuffleWords() {
    for (let i = words.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [words[i], words[j]] = [words[j], words[i]];
    }
}

function updateUI() {
    document.getElementById('score').textContent = score;
    document.getElementById('streak').textContent = streak;
    document.getElementById('learned-words').textContent = learnedWords.size;
    
    const progress = (currentWordIndex / words.length) * 100;
    document.getElementById('progress-bar').style.width = `${progress}%`;
    
    document.getElementById('game').style.display = 'block';
    document.getElementById('game-over').style.display = 'none';
}

function showNextWord() {
    if (currentWordIndex < words.length) {
        const currentWord = words[currentWordIndex];
        const wordDisplay = document.getElementById('word-display');
        
        wordDisplay.innerHTML = `
            <div class="word-container">
                <img src="${currentWord.image}" alt="${currentWord.dutch}" class="word-image">
                <h2 class="dutch-word">${currentWord.dutch}</h2>
                <small class="text-muted">${currentWord.english}</small>
                <button onclick="playPronunciation('${currentWord.dutch}')" class="btn btn-sm btn-info mt-2">
                    <i class="fas fa-volume-up"></i> Uitspraak
                </button>
            </div>
        `;
        
        document.getElementById('answer').value = '';
        document.getElementById('answer').focus();
    } else {
        endGame();
    }
}

function checkAnswer() {
    const userAnswer = document.getElementById('answer').value.toLowerCase().trim();
    const currentWord = words[currentWordIndex];
    
    if (userAnswer === currentWord.english.toLowerCase()) {
        streak++;
        const bonusPoints = Math.floor(streak / 3) * 5;
        score += currentWord.points + bonusPoints;
        learnedWords.add(currentWord.dutch);
        showFeedback(true, bonusPoints);
    } else {
        streak = 0;
        showFeedback(false, currentWord.english);
    }
    
    currentWordIndex++;
    updateUI();
    
    setTimeout(() => {
        showNextWord();
    }, 1500);
}

function showFeedback(isCorrect, extra) {
    const feedbackContainer = document.getElementById('feedback-container');
    const feedbackClass = isCorrect ? 'alert-success' : 'alert-danger';
    let feedbackMessage = isCorrect ? 
        `✅ Correct! ${extra > 0 ? `Bonus punten: +${extra}` : ''}` : 
        `❌ Onjuist! Juiste antwoord: ${extra}`;
    
    if (streak > 2 && isCorrect) {
        feedbackMessage += ` 🔥 ${streak} woorden reeks!`;
    }
    
    feedbackContainer.innerHTML = `
        <div class="alert ${feedbackClass} mt-3">
            ${feedbackMessage}
        </div>
    `;
    
    setTimeout(() => {
        feedbackContainer.innerHTML = '';
    }, 1500);
}

function endGame() {
    document.getElementById('game').style.display = 'none';
    document.getElementById('game-over').style.display = 'block';
    document.getElementById('final-score').textContent = score;
    document.getElementById('final-learned').textContent = learnedWords.size;
}

function restartGame() {
    resetGame();
}

function playPronunciation(word) {
    const utterance = new SpeechSynthesisUtterance(word);
    utterance.lang = 'nl-NL';
    window.speechSynthesis.speak(utterance);
}

// Enter tuşu ile cevap verme
document.getElementById('answer').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        checkAnswer();
    }
});

// Oyunu başlat
initGame(); 